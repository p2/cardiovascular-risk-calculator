function gender(e){if(e){$(e).addClass("active").siblings().removeClass("active")}return $("#male").hasClass("active")?1:0}function race(e){if(e){$(e).addClass("active").siblings().removeClass("active")}return $("#black").hasClass("active")?1:0}function ethnicity(){return $("#ethnicity").val()}function male(){return 1==gender()}function female(){return 0==gender()}function black(){return 1==race()}function nonblack(){return 0==race()}function smoker(e){if(e){$(e).addClass("active").siblings().removeClass("active")}return $("#smoker_yes").hasClass("active")?1:0}function totalchol(){if(_useMMOL){return $("#totalchol_mmol").val()*1}return $("#totalchol_mgdl").val()/38.666666}function hdlchol(){if(_useMMOL){return $("#hdlchol_mmol").val()*1}return $("#hdlchol_mgdl").val()/38.666666}function height(){if(_useCm){return $("#height_cm").val()*1}return $("#height_in").val()*2.54}function weight(){if(_useKg){return $("#weight_kg").val()*1}return $("#weight_lbs").val()/2.2}function bodymassindex(){return weight()/(height()/100*height()/100)}function diabetes(e){if(e){$(e).addClass("active").siblings().removeClass("active")}return $("#diabetes_yes").hasClass("active")?1:0}function famhistory(e){if(e){$(e).addClass("active").siblings().removeClass("active")}return $("#famhistory_yes").hasClass("active")?1:0}function ckd(e){if(e){$(e).addClass("active").siblings().removeClass("active")}return $("#ckd_yes").hasClass("active")?1:0}function afib(e){if(e){$(e).addClass("active").siblings().removeClass("active")}return $("#afib_yes").hasClass("active")?1:0}function ra(e){if(e){$(e).addClass("active").siblings().removeClass("active")}return $("#ra_yes").hasClass("active")?1:0}function systole(){return $("#sbp").val()*1}function bptreatment(e){if(e&&!$(e).parent().hasClass("disabled")){$(e).addClass("active").siblings().removeClass("active")}return $("#bptreatment_yes").hasClass("active")?1:0}function isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}function adjustSlider(e,t,n,r,i){if($(r).attr("id")==e){var s=$("#"+e).val();var o=$("#"+t).attr("min");var u=$("#"+t).attr("max");if(!isNumeric(s)){$("#outcome").addClass("opacity10");$("#"+e).addClass("errorTextbox");return false}if(parseFloat(s)<parseFloat(o)){setTimeout(function(){if(parseFloat($("#"+e).val())<parseFloat(o)){$("#"+n["alert_id"]).html(n["label"]+" must be between "+o+" and "+u+" "+n["suffix"]).show();$("#"+e).addClass("errorTextbox")}},errorDelay);$("#outcome").addClass("opacity10");return}if(parseFloat(s)>parseFloat(u)){setTimeout(function(){if(parseFloat($("#"+e).val())>parseFloat(u)){$("#"+n["alert_id"]).html(n["label"]+" must be between "+o+" and "+u+" "+n["suffix"]).show();$("#"+e).addClass("errorTextbox")}},errorDelay);$("#outcome").addClass("opacity10");return}$("#"+t).val(s)}else{$("#"+e).val($("#"+t).val())}$("#"+e).removeClass("errorTextbox");adjust(e,r,i)}function adjust(e,t,n){adjustValue(e,$(t).val(),n)}function adjustValue(e,t,n){if("sbp"==e){if(t>120){$("#bptreatment_toggle").removeClass("disabled");$("#bptreatment_hint").hide()}else if(!$("#bptreatment_toggle").hasClass("disabled")){bptreatment($("#bptreatment_no"));$("#bptreatment_toggle").addClass("disabled");$("#bptreatment_hint").show()}}if(!n){CALC()}}function toggleBenefit(e){var t=$(e);if(!t){return}t.toggleClass("active").siblings().removeClass("active");var n="";if(t.hasClass("active")){var r=t.data("benefit");if(r in _benefit_risks){var i=_benefit_risks[r];if("string"==typeof i){n=i}else if(i&&i.length>0){n="<ul><li>"+i.join("</li><li>")+"</li></ul>"}}else{alert('There is no harm information for the intervention "'+r+'"')}}$("#benefit_information").remove();$("h3.relativeBenefit > span").removeClass("active");if(n&&n.length>0){var s="<h3>Harm of Intervention</h3><p>"+n+"</p>";var o=$("<li/>",{id:"benefit_information"}).html(s);var u=t.offset().top;while(t.next()&&t.next().offset()&&u>=t.next().offset().top){t=t.next()}t.after(o);$("h3.relativeBenefit > span").addClass("active")}CALC()}function benefit(e){if(!e||!(e in _benefit)){alert("I cannot currently calculate benefits for this formula: "+(e?e:"not defined"));return 0}var t=$("#benefit_estimates").find("li").map(function(e,t){var n=$(t);if(n.hasClass("active")){return n.data("benefit")}}).get();var n=0;for(var r in _benefit[e]){if(!t.contains(r)){continue}if("bp"==r&&systole()<_bp_threshold){continue}var i=_benefit[e][r];if("number"!=typeof i){var s=0;var o=null;for(var u in i){if("default"==u){s=i[u]}else{var a=window[u];if(!a||"function"!=typeof a){alert("The benefit for "+r+" of type "+u+" is invalid, needs to be a function name")}else if(a()){o=i[u];break}}}i=null!==o?o:s}if("number"!=typeof i){console.error(i);alert("Not a numerical value for benefit "+r+": "+i)}else if(i>n){n=i}}return n}function setFormula(e){setFormulaById($(e).data("calc"))}function setFormulaById(e){if(!e){return}_formula_id=e;$("#formula_selector").find("li").removeClass("active").filter(function(e){return $(this).data("calc")==_formula_id}).addClass("active");calculate(e)}function CALC(){calculate(_formula_id)}function BlackFemale(){this.Age=17.1141;this.AgeSquared=0;this.TC=.9396;this.AgexTC=0;this.HDL=-18.9196;this.AgexHDL=4.4748;this.TreatedBP=29.2907;this.AgexTreatedBP=-6.4321;this.UntreatedBP=27.8197;this.AgexUntreatedBP=-6.0873;this.Smoker=.6908;this.AgexSmoker=0;this.Diabetes=.8738;this.BaselineSurvival=.95334;this.OverallMean=86.6081}function BlackMale(){this.Age=2.469;this.AgeSquared=0;this.TC=.302;this.AgexTC=0;this.HDL=-.307;this.AgexHDL=0;this.TreatedBP=1.916;this.AgexTreatedBP=0;this.UntreatedBP=1.809;this.AgexUntreatedBP=0;this.Smoker=.549;this.AgexSmoker=0;this.Diabetes=.645;this.BaselineSurvival=.89536;this.OverallMean=19.5425}function WhiteFemale(){this.Age=-29.799;this.AgeSquared=4.884;this.TC=13.54;this.AgexTC=-3.114;this.HDL=-13.578;this.AgexHDL=3.149;this.TreatedBP=2.019;this.AgexTreatedBP=0;this.UntreatedBP=1.957;this.AgexUntreatedBP=0;this.Smoker=7.574;this.AgexSmoker=-1.665;this.Diabetes=.661;this.BaselineSurvival=.96652;this.OverallMean=-29.1817}function WhiteMale(){this.Age=12.344;this.AgeSquared=0;this.TC=11.853;this.AgexTC=-2.664;this.HDL=-7.99;this.AgexHDL=1.769;this.TreatedBP=1.797;this.AgexTreatedBP=0;this.UntreatedBP=1.764;this.AgexUntreatedBP=0;this.Smoker=7.837;this.AgexSmoker=-1.795;this.Diabetes=.658;this.BaselineSurvival=.91436;this.OverallMean=61.1816}function calculate(e){var t=$("#overestimate").val()*1;var n=benefit(e);$("#benefit").text(n);var r=$("#time").val()*1;var i=gender();var s=$("#age").val()*1;var o=systole();var u=smoker();var a=totalchol();var f=hdlchol();var l=diabetes();var c=0;var h=120;var p=0;var d=3;var v=1.3;var m=0;var g=0;var y=0;var b=0;$(".errorAlert").hide();$("#outcome").removeClass("opacity10");$('input[type="number"]:visible').each(function(){var e=parseFloat($(this).val());var t=parseFloat($(this).attr("min"));var n=parseFloat($(this).attr("max"));if(e<t||e>n){$(this).change()}});if("cvd"==e){y=t*(1-Math.exp(-Math.exp((Math.log(r)-(18.8144+ -1.2146*(1-i)+ -1.8443*Math.log(s)+0*Math.log(s)*Math.log(s)+.3668*Math.log(s)*(1-i)+0*Math.log(s)*Math.log(s)*(1-i)+ -1.4032*Math.log(o)+ -.3899*u+ -.539*Math.log(a/f)+ -.3036*l+ -.1697*l*(1-i)+ -.3362*c+0*c*i))/(Math.exp(.6536)*Math.exp(-.2402*(18.8144+ -1.2146*(1-i)+ -1.8443*Math.log(s)+0*Math.log(s)*Math.log(s)+.3668*Math.log(s)*(1-i)+0*Math.log(s)*Math.log(s)*(1-i)+ -1.4032*Math.log(o)+ -.3899*u+ -.539*Math.log(a/f)+ -.3036*l+ -.1697*l*(1-i)+ -.3362*c+0*c*i))))));b=t*(1-Math.exp(-Math.exp((Math.log(r)-(18.8144+ -1.2146*(1-i)+ -1.8443*Math.log(s)+0*Math.log(s)*Math.log(s)+.3668*Math.log(s)*(1-i)+0*Math.log(s)*Math.log(s)*(1-i)+ -1.4032*Math.log(h)+ -.3899*p+ -.539*Math.log(d/v)+ -.3036*m+ -.1697*m*(1-i)+ -.3362*g+0*g*i))/(Math.exp(.6536)*Math.exp(-.2402*(18.8144+ -1.2146*(1-i)+ -1.8443*Math.log(s)+0*Math.log(s)*Math.log(s)+.3668*Math.log(s)*(1-i)+0*Math.log(s)*Math.log(s)*(1-i)+ -1.4032*Math.log(h)+ -.3899*p+ -.539*Math.log(d/v)+ -.3036*m+ -.1697*m*(1-i)+ -.3362*g+0*g*i))))))}else if("chd"==e){y=t*(1-Math.exp(-Math.exp((Math.log(r)-(15.5305+28.4441*(1-i)+ -1.4792*Math.log(s)+0*Math.log(s)*Math.log(s)+ -14.4588*Math.log(s)*(1-i)+1.8515*Math.log(s)*Math.log(s)*(1-i)+ -.9119*Math.log(o)+ -.2767*u+ -.7181*Math.log(a/f)+ -.1759*l+ -.1999*l*(1-i)+ -.5865*c+0*c*i))/(Math.exp(.9145)*Math.exp(-.2784*(15.5305+28.4441*(1-i)+ -1.4792*Math.log(s)+0*Math.log(s)*Math.log(s)+ -14.4588*Math.log(s)*(1-i)+1.8515*Math.log(s)*Math.log(s)*(1-i)+ -.9119*Math.log(o)+ -.2767*u+ -.7181*Math.log(a/f)+ -.1759*l+ -.1999*l*(1-i)+ -.5865*c+0*c*i))))));b=t*(1-Math.exp(-Math.exp((Math.log(r)-(15.5305+28.4441*(1-i)+ -1.4792*Math.log(s)+0*Math.log(s)*Math.log(s)+ -14.4588*Math.log(s)*(1-i)+1.8515*Math.log(s)*Math.log(s)*(1-i)+ -.9119*Math.log(h)+ -.2767*p+ -.7181*Math.log(d/v)+ -.1759*m+ -.1999*m*(1-i)+ -.5865*g+0*g*i))/(Math.exp(.9145)*Math.exp(-.2784*(15.5305+28.4441*(1-i)+ -1.4792*Math.log(s)+0*Math.log(s)*Math.log(s)+ -14.4588*Math.log(s)*(1-i)+1.8515*Math.log(s)*Math.log(s)*(1-i)+ -.9119*Math.log(h)+ -.2767*p+ -.7181*Math.log(d/v)+ -.1759*m+ -.1999*m*(1-i)+ -.5865*g+0*g*i))))))}else if("mi"==e){y=t*(1-Math.exp(-Math.exp((Math.log(r)-(11.4712+10.5109*(1-i)+ -.7965*Math.log(s)+0*Math.log(s)*Math.log(s)+ -5.4216*Math.log(s)*(1-i)+.7101*Math.log(s)*Math.log(s)*(1-i)+ -.6623*Math.log(o)+ -.2675*u+ -.4277*Math.log(a/f)+ -.1534*l+ -.1165*l*(1-i)+0*c+ -.1588*c*i))/(Math.exp(3.4064)*Math.exp(-.8584*(11.4712+10.5109*(1-i)+ -.7965*Math.log(s)+0*Math.log(s)*Math.log(s)+ -5.4216*Math.log(s)*(1-i)+.7101*Math.log(s)*Math.log(s)*(1-i)+ -.6623*Math.log(o)+ -.2675*u+ -.4277*Math.log(a/f)+ -.1534*l+ -.1165*l*(1-i)+0*c+ -.1588*c*i))))));b=t*(1-Math.exp(-Math.exp((Math.log(r)-(11.4712+10.5109*(1-i)+ -.7965*Math.log(s)+0*Math.log(s)*Math.log(s)+ -5.4216*Math.log(s)*(1-i)+.7101*Math.log(s)*Math.log(s)*(1-i)+ -.6623*Math.log(h)+ -.2675*p+ -.4277*Math.log(d/v)+ -.1534*m+ -.1165*m*(1-i)+0*g+ -.1588*g*i))/(Math.exp(3.4064)*Math.exp(-.8584*(11.4712+10.5109*(1-i)+ -.7965*Math.log(s)+0*Math.log(s)*Math.log(s)+ -5.4216*Math.log(s)*(1-i)+.7101*Math.log(s)*Math.log(s)*(1-i)+ -.6623*Math.log(h)+ -.2675*p+ -.4277*Math.log(d/v)+ -.1534*m+ -.1165*m*(1-i)+0*g+ -.1588*g*i))))))}else if("stroke"==e){y=t*(1-Math.exp(-Math.exp((Math.log(r)-(26.5116+.2019*(1-i)+ -2.3741*Math.log(s)+0*Math.log(s)*Math.log(s)+0*Math.log(s)*(1-i)+0*Math.log(s)*Math.log(s)*(1-i)+ -2.4643*Math.log(o)+ -.3914*u+ -.0229*Math.log(a/f)+ -.3087*l+ -.2627*l*(1-i)+ -.2355*c+0*c*i))/(Math.exp(-.4312)*Math.exp(0*(26.5116+.2019*(1-i)+ -2.3741*Math.log(s)+0*Math.log(s)*Math.log(s)+0*Math.log(s)*(1-i)+0*Math.log(s)*Math.log(s)*(1-i)+ -2.4643*Math.log(o)+ -.3914*u+ -.0229*Math.log(a/f)+ -.3087*l+ -.2627*l*(1-i)+ -.2355*c+0*c*i))))));b=t*(1-Math.exp(-Math.exp((Math.log(r)-(26.5116+.2019*(1-i)+ -2.3741*Math.log(s)+0*Math.log(s)*Math.log(s)+0*Math.log(s)*(1-i)+0*Math.log(s)*Math.log(s)*(1-i)+ -2.4643*Math.log(h)+ -.3914*p+ -.0229*Math.log(d/v)+ -.3087*m+ -.2627*m*(1-i)+ -.2355*g+0*g*i))/(Math.exp(-.4312)*Math.exp(0*(26.5116+.2019*(1-i)+ -2.3741*Math.log(s)+0*Math.log(s)*Math.log(s)+0*Math.log(s)*(1-i)+0*Math.log(s)*Math.log(s)*(1-i)+ -2.4643*Math.log(h)+ -.3914*p+ -.0229*Math.log(d/v)+ -.3087*m+ -.2627*m*(1-i)+ -.2355*g+0*g*i))))))}else if("ascvd"==e){var w=black();var E=bptreatment();var S;if(i&&!w){S=new WhiteMale}if(!i&&!w){S=new WhiteFemale}if(i&&w){S=new BlackMale}if(!i&&w){S=new BlackFemale}y=t*ASCVD10YrRisk(S,s,Math.round(a/.0259),Math.round(f/.0259),o,E,l,u);b=t*ASCVD10YrRisk(S,s,Math.round(d/.0259),Math.round(v/.0259),h,0,0,0)}else if("qrisk"==e){var x=s;var T=afib();var N=ra();var C=ckd();var k=bptreatment();var L=$("#dm_cat").val()=="1"?1:0;var A=$("#dm_cat").val()=="2"?1:0;var O=bodymassindex();var M=$("#ethnicity").val();var _=famhistory();var D=totalchol()/hdlchol();var P=systole();var H=$("#smoke_cat").val();var B=10;var j=0;$("#bmi").html(O.toFixed(1)+" kg/m<sup>2</sup>");if(i){y=t*QRISK_Male(x,T,N,C,k,L,A,O,M,_,D,P,H,B,j)/100;b=t*QRISK_Male(x,T,N,C,0,0,0,25,M,_,d/v,h,0,B,j)/100}else{y=t*QRISK_Female(x,T,N,C,k,L,A,O,M,_,D,P,H,B,j)/100;b=t*QRISK_Female(x,T,N,C,0,0,0,25,M,_,d/v,h,0,B,j)/100}}if("ascvd"==e){$("#divRace").show();$("#divBPTreatment").show()}else{$("#divRace").hide();$("#divBPTreatment").hide()}if("qrisk"==e){$("#divEthnicity").show();$("#smoker_dicotomous").hide();$("#smoker_detailed").show();$("#dm_dichotomous").hide();$("#dm_detailed").show();$(".qrisk_questions").show();$("#divBPTreatment").show();$("#qrisk_disclaimer").show();$("#divFamilyHistoryOfEarlyCHD").hide()}else{$("#divEthnicity").hide();$("#smoker_dicotomous").show();$("#smoker_detailed").hide();$("#dm_dichotomous").show();$("#dm_detailed").hide();$(".qrisk_questions").hide();$("#divBPTreatment").hide();$("#qrisk_disclaimer").hide();$("#divFamilyHistoryOfEarlyCHD").show()}if("qrisk"==e||"ascvd"==e){$("#rangeTime").prop("disabled",true);$("#time").prop("disabled",true);$("#rangeTime").val(10);$("#time").val(10);$("#divTime").hide();$("#time_fixed").show();adjust("time",$("#rangeTime"),true)}else{$("#divTime").show();$("#time").prop("disabled",false);$("#rangeTime").prop("disabled",false);$("#time_fixed").hide()}var F=y-b;var I=Math.max(0,Math.min(F,y*n/100));var q=Math.max(0,F-I);var R=100-(b+I+q);$("#score_good").text(R.toFixed(1)+"%");$("#score_bad_sum").text((parseFloat(b.toFixed(1))+parseFloat(q.toFixed(1))).toFixed(1)+"%");$("#score_bad").text(b.toFixed(1)+"%");$("#score_bad_add").text(q.toFixed(1)+"%");$("#score_benefits").text(I.toFixed(1)+"%");$("#score_nnt").text(I>0?Math.round(100/I):"âˆž");var U=Math.round(b);var z=Math.round(I);var W=Math.round(q+I)-z;var X=100-(U+W+z);var V=$("#faces").empty();for(var J=0;J<U;J++){V.prepend(newFace("bad"))}for(var J=0;J<W;J++){V.prepend(newFace("badA"))}for(var J=0;J<z;J++){V.prepend(newFace("green"))}for(var J=0;J<X;J++){V.prepend(newFace("blue"))}}function ASCVD10YrRisk(e,t,n,r,i,s,o,u){var a=0;a+=Math.log(t)*e.Age;a+=Math.pow(Math.log(t),2)*e.AgeSquared;a+=Math.log(n)*e.TC;a+=Math.log(t)*Math.log(n)*e.AgexTC;a+=Math.log(r)*e.HDL;a+=Math.log(t)*Math.log(r)*e.AgexHDL;if(s===1){a+=Math.log(i)*e.TreatedBP;a+=Math.log(t)*Math.log(i)*e.AgexTreatedBP}else{a+=Math.log(i)*e.UntreatedBP;a+=Math.log(t)*Math.log(i)*e.AgexUntreatedBP}a+=u*e.Smoker;a+=u*Math.log(t)*e.AgexSmoker;a+=o*e.Diabetes;return 1-Math.pow(e.BaselineSurvival,Math.pow(Math.E,a-e.OverallMean))}function QRISK_Male(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=0;if(e<25||e>84){$("#alert_age").html("Age must be between 25 and 84 years for QRISK").show();v=1}if(bodymassindex()<20||bodymassindex()>40){$("#alert_BMI").html("BMI must be between 20 and 40 kg/m<sup>2</sup> for QRISK").show();v=1}if(systole()<70||systole()>210){$("#alert_sbp").html("Systolic BP must be between 70 and 210 mmHg for QRISK").show();v=1}if(totalchol()/hdlchol()<1||totalchol()/hdlchol()>12){$("#alert_chol").html("Total:HDL cholesterol ratio must be between 1 and 12 for QRISK ("+Math.round(totalchol()/hdlchol()*10)/10+" entered)").show();v=1}if(v){$("#outcome").addClass("opacity10");return 0}var m=[0,0,0,0,0,0,0,0,0,0,.977699398994446,0,0,0,0,0];var g=[0,0,.35671336474934434,.536955960817619,.5190878419529624,.2182992106490147,-.3474174705898492,-.3674730037922804,-.37496648914261427,-.19269477425316045];var y=[0,.2784649664157046,.606783439516896,.7103835060989259,.8626172339181203];var b=e;b=b/10;var w=Math.pow(b,-1);var E=Math.pow(b,2);var S=u;S=S/10;var x=Math.pow(S,-2);var T=Math.pow(S,-2)*Math.log(S);w=w-.232008963823318;E=E-18.57763671875;x=x-.146408438682556;T=T-.140651300549507;l=l-4.377167701721191;c=c-131.03831481933594;d=d-.151332527399063;var N=0;N+=g[a];N+=y[h];N+=w*-17.62255433819456;N+=E*.024187318929827364;N+=x*1.7320282704272665;N+=T*-7.231175406669975;N+=l*.1751387974012235;N+=c*.01016763051791969;N+=d*.029817727149672096;N+=t*.9890997526189402;N+=n*.2541886209118611;N+=r*.794978923043832;N+=i*.6229359479868044;N+=s*1.333035332146393;N+=o*.937295682815194;N+=f*.5923353736582423;N+=w*(h==1)*.9243747443632776;N+=w*(h==2)*1.9597527500081284;N+=w*(h==3)*2.9993544847631153;N+=w*(h==4)*5.03707352547681;N+=w*t*8.235420545548273;N+=w*r*-3.974738995197678;N+=w*i*7.873774315916773;N+=w*s*5.423850441446094;N+=w*o*5.062416180653014;N+=w*x*33.543752516739424;N+=w*T*-129.97667382572038;N+=w*f*1.927996387465979;N+=w*c*.05234408921756202;N+=w*d*-.17305880749635402;N+=E*(h==1)*-.0034466074038854394;N+=E*(h==2)*-.005070343149995295;N+=E*(h==3)*.0003216059799916441;N+=E*(h==4)*.0031312537144240087;N+=E*t*.007329193725503997;N+=E*r*-.026155707328653178;N+=E*i*.008555638262261812;N+=E*s*.0020586479482670723;N+=E*o*-.0002328590770854173;N+=E*x*.0811847212080795;N+=E*T*-.25589190688509483;N+=E*f*-.005672907372966341;N+=E*c*-5365842573072993e-20;N+=E*d*-.0010763305052605857;var C=100*(1-Math.pow(m[p],Math.exp(N)));return C}function QRISK_Female(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=0;if(e<25||e>84){$("#alert_age").html("Age must be between 25 and 84 years for QRISK").show();v=1}if(bodymassindex()<20||bodymassindex()>40){$("#alert_BMI").html("BMI must be between 20 and 40 kg/m<sup>2</sup> for QRISK").show();v=1}if(systole()<70||systole()>210){$("#alert_sbp").html("Systolic BP must be between 70 and 210 mmHg for QRISK").show();v=1}if(totalchol()/hdlchol()<1||totalchol()/hdlchol()>12){$("#alert_chol").html("Total:HDL cholesterol ratio must be between 1 and 12 for QRISK ("+Math.round(totalchol()/hdlchol()*10)/10+" entered)").show();v=1}if(v){$("#outcome").addClass("opacity10");return 0}var m=[0,0,0,0,0,0,0,0,0,0,.98894876241684,0,0,0,0,0];var g=[0,0,.26719580479021515,.7147534261793344,.37028944744551157,.20737973626202355,-.17441497227417369,-.3271878654368842,-.22006178761292505,-.20903880324666968];var y=[0,.19474808565288548,.6229400520450628,.7405819891143353,.913439268457696];var b=e;b=b/10;var w=Math.pow(b,.5);var E=b;var S=u;S=S/10;var x=Math.pow(S,-2);var T=Math.pow(S,-2)*Math.log(S);w=w-2.099778413772583;E=E-4.409069538116455;x=x-.154046609997749;T=T-.144072100520134;l=l-3.554229259490967;c=c-125.77362823486328;d=d-.032508373260498;var N=0;N+=g[a];N+=y[h];N+=w*3.8734583855051343;N+=E*.13466343044783846;N+=x*-.15578724033330626;N+=T*-3.7727795566691125;N+=l*.15256952089196796;N+=c*.013216530011965356;N+=d*.06436475298640171;N+=t*1.4235421148946676;N+=n*.3021462511553648;N+=r*.8614743039721416;N+=i*.5889355458733704;N+=s*1.6684783657502795;N+=o*1.1350165062510138;N+=f*.5133972775738673;N+=w*(h==1)*.6891139747579299;N+=w*(h==2)*.6942632802121627;N+=w*(h==3)*-1.6952388644218186;N+=w*(h==4)*-1.2150150940219255;N+=w*t*-3.585521544819097;N+=w*r*-3.0766647922469192;N+=w*i*-4.029530281188031;N+=w*s*-.33441105674057786;N+=w*o*-3.314480680662053;N+=w*x*-5.593390579723001;N+=w*T*64.3635572837689;N+=w*f*.8605433761217157;N+=w*c*-.05093211545511886;N+=w*d*.15186645407244537;N+=E*(h==1)*-.17653954858826815;N+=E*(h==2)*-.2323836483278573;N+=E*(h==3)*.2734395770551826;N+=E*(h==4)*.14325522874541527;N+=E*t*.4986871390807032;N+=E*r*.43930336156649386;N+=E*i*.690438579030325;N+=E*s*-.17343165660603277;N+=E*o*.48649306558679495;N+=E*x*1.5223341309207974;N+=E*T*-12.741343620796407;N+=E*f*-.275670848141511;N+=E*c*.007379075003974419;N+=E*d*-.04874654626796409;var C=100*(1-Math.pow(m[p],Math.exp(N)));return C}function newFace(e){var t=false;if("devicePixelRatio"in window){t=window.devicePixelRatio>1}var n=new Image;n.src="imgs/"+e+(t?"@2x":"")+".png";return n}function toggleCholesterolUnit(){_useMMOL=!_useMMOL;var e=38.666666;if(_useMMOL){$("#input").find(".chol_mmol").show();$("#input").find(".chol_mgdl").hide();var t=Math.round($("#totalchol_mgdl").val()/e*10)/10;$("#totalchol_mmol").val(t);$("#chol_mmol").val(t);adjustSlider("chol_mmol","totalchol_mmol",_alerts["tchol"],null,true);var n=Math.round($("#hdlchol_mgdl").val()/e*10)/10;$("#hdlchol_mmol").val(n);$("#hdl_mmol").val(n);adjustSlider("hdl_mmol","hdlchol_mmol",_alerts["hdl"],null,true)}else{$("#input").find(".chol_mmol").hide();$("#input").find(".chol_mgdl").show();var t=Math.round($("#totalchol_mmol").val()*e/2)*2;$("#totalchol_mgdl").val(t);$("#chol_mgdl").val(t);adjustSlider("chol_mgdl","totalchol_mgdl",_alerts["tchol"],null,true);var n=Math.round($("#hdlchol_mmol").val()*e/2)*2;$("#hdlchol_mgdl").val(n);$("#hdl_mgdl").val(n);adjustSlider("hdl_mgdl","hdlchol_mgdl",_alerts["hdl"],null,true)}}function toggleHeightUnit(){_useCm=!_useCm;var e=2.54;if(_useCm){$("#divHeightCm").show();$("#divHeightIn").hide();var t=Math.round($("#height_in").val()*e*2)/2;$("#height_cm").val(t);$("#height_cm_label").val(t);adjustSlider("height_cm_label","height_cm",_alerts["height"],null,true)}else{$("#divHeightCm").hide();$("#divHeightIn").show();var t=Math.round($("#height_cm").val()/e*1)/1;$("#height_in").val(t);$("#height_in_label").val(t);adjustSlider("height_in_label","height_in",_alerts["height"],null,true)}}function toggleWeightUnit(){_useKg=!_useKg;var e=2.2;if(_useKg){$("#divWeightKg").show();$("#divWeightLbs").hide();var t=Math.round($("#weight_lbs").val()/e*.5)/.5;$("#weight_kg").val(t);$("#weight_kg_label").val(t);adjustSlider("weight_kg_label","weight_kg",_alerts["weight"],null,true)}else{$("#divWeightKg").hide();$("#divWeightLbs").show();var t=Math.round($("#weight_kg").val()*e*1)/1;$("#weight_lbs").val(t);$("#weight_lbs_label").val(t);adjustSlider("weight_lbs_label","weight_lbs",_alerts["weight"],null,true)}}function showImages(e){var t="";if("cvd"==e){t='<div><img src="imgs/heart_attack.jpg" />Heart Attacks</div><div><img src="imgs/heart_failure.jpg" />Heart Failure</div><div><img src="imgs/stroke.jpg" />Strokes</div><div><img src="imgs/intermittent.jpg" />Intermittent claudication</div>'}else if("chd"==e){t='<div><img src="imgs/heart_attack.jpg" />Heart Attacks</div><div><img src="imgs/angina.jpg" />Angina</div>'}else if("mi"==e){t='<div><img src="imgs/heart_attack.jpg" />Heart Attacks</div>'}else if("stroke"==e){t='<div><img src="imgs/stroke.jpg" />Strokes</div>'}$("#disease").html(t)}function convertSliders(){$("input[type=range]").each(function(e,t){$(t).keyup(function(e){var t=$(e.target);var n=1*t.attr("min2");var r=1*t.attr("max");var i=t.val();if(undefined!==n&&i<n){t.val(n)}if(undefined!==r&&i>r){t.val(r)}CALC()}).css("width","30%").next("b").hide()})}function offlineHint(){alert("This calculator can be used while offline.\n\nOn portable devices you may create a home screen icon for quick access, the calculator will act as if it was an App.")}function offlineStatusChanged(e){var t="Available offline";if("checking"==e.type||"downloading"==e.type){t="Cache "+e.type+"..."}else if("updateready"==e.type){window.applicationCache.swapCache();window.location.reload()}$("#cache_status").text(t)}var errorDelay=750;$(document).ready(function(){if(CONVERT_SLIDERS){convertSliders()}setFormulaById("cvd");if("applicationCache"in window){window.applicationCache.addEventListener("checking",offlineStatusChanged,false);window.applicationCache.addEventListener("noupdate",offlineStatusChanged,false);window.applicationCache.addEventListener("downloading",offlineStatusChanged,false);window.applicationCache.addEventListener("cached",offlineStatusChanged,false);window.applicationCache.addEventListener("updateready",offlineStatusChanged,false);window.applicationCache.addEventListener("obsolete",offlineStatusChanged,false);window.applicationCache.addEventListener("error",offlineStatusChanged,false)}});var _useMMOL=true;var _useCm=true;var _useKg=true;Array.prototype.contains=function(e){return this.indexOf(e)>=0};if(!("indexOf"in Array.prototype)){Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++){if(this[t]==e)return t}return-1}}